(this["webpackJsonpjavascript-games"]=this["webpackJsonpjavascript-games"]||[]).push([[0],{11:function(e,t,i){},12:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(4),s=i.n(r),o=(i(11),i(5)),c=function(e){var t=e.message,i=e.onClick;return t?a.a.createElement("div",{id:"message",onClick:i},t.map((function(e,t){return a.a.createElement("div",{key:t},e)}))):null},h=i(1),u=i(2);function l(e,t){switch(e.type){case 1:switch(t.type){case 1:return function(e,t){if(e.x2<=t.x1||e.x1>=t.x2||e.y2<=t.y1||e.y1>=t.y2)return!1;return!0}(e,t);case 2:return d(t,e);default:throw new Error("cannot collide "+e.type+" "+t.type)}case 2:switch(t.type){case 1:return d(e,t);case 2:return function(e,t){var i=e.cx-t.cx,n=e.cy-t.cy,a=i*i+n*n,r=e.radius+t.radius;if(a<r*r)return!0;return!1}(e,t);default:throw new Error("cannot collide "+e.type+" "+t.type)}default:throw new Error("cannot collide "+e.type+" "+t.type)}}function d(e,t){var i=0,n=e.cx,a=e.cy;e.cx<t.x1?(i|=1,n=t.x1):e.cx>t.x2&&(i|=1,n=t.x2),e.cy<t.y1?(i|=2,a=t.y1):e.cy>t.y2&&(i|=2,a=t.y2);var r=e.cx-n,s=e.cy-a;return r*r+s*s<=e.radius*e.radius?i:0}var f={},m={},w=320,y=180;function v(e,t){f.width=e,f.height=t,f.scale=Math.min(e/w,t/y),f.offsetX=(e-w*f.scale)/2,f.offsetY=(t-y*f.scale)/2}function g(){var e=m;v(e.width,e.height)}function p(){var e=f,t=e.player,i=e.obstacles,n=e.score,a=e.keyState;if(!f.gameOver){if(f.frameCount++,f.frameCount%150===1){var r=S(20,100),s=S(50,100),o=Math.floor(f.width/f.scale);i.push(new T(o,0,10,r,"green")),i.push(new T(o,r+s,10,y-r-s,"green"))}t.update(a);for(var c=0;c<i.length;c++)i[c].update();f.obstacles=i.filter((function(e){return e.onScreen})),n.text="SCORE: "+f.frameCount;for(var h=t.getCollisionBounds(),u=0;u<i.length;u+=1)l(h,i[u].getCollisionBounds())&&(f.gameOver=!0,m.showMessage(["GAME OVER"]))}}function x(){var e=m.ctx,t=f,i=t.width,n=t.height,a=t.player,r=t.obstacles,s=t.score;e.clearRect(0,0,i,n),e.fillStyle="#111",e.fillRect(f.offsetX,f.offsetY,w*f.scale,y*f.scale),e.save(),e.rect(f.offsetX,f.offsetY,w*f.scale,y*f.scale),e.clip(),a.render(e);for(var o=0;o<r.length;o+=1)r[o].render(e);s.render(e),e.restore()}function k(e){f.keyState[e.code]=!0}function C(e){f.keyState[e.code]=!1}function S(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var E=function(){function e(t,i,n,a,r,s){Object(h.a)(this,e),this.x=t,this.y=i,this.color=n,this.fontName=a,this.fontSize=r,this.text=s}return Object(u.a)(e,[{key:"render",value:function(e){e.font=(this.fontSize*f.scale).toFixed(0)+"px "+this.fontName,e.fillStyle=this.color,e.textAlign="right",e.textBaseline="top";var t=this.x,i=this.y;t=t*f.scale+f.offsetX,i=i*f.scale+f.offsetY,e.fillText(this.text,t,i)}}]),e}(),R=function(){function e(t,i,n,a){Object(h.a)(this,e),this.x=t,this.y=i,this.radius=n,this.color=a,this.speedX=0,this.speedY=0}return Object(u.a)(e,[{key:"update",value:function(e){this.speedX=0,this.speedY=0,(e.KeyW||e.ArrowUp)&&(this.speedY-=1),(e.KeyS||e.ArrowDown)&&(this.speedY+=1),(e.KeyA||e.ArrowLeft)&&(this.speedX-=1),(e.KeyD||e.ArrowRight)&&(this.speedX+=1),this.x+=this.speedX,this.y+=this.speedY,this.x<this.radius?this.x=this.radius:this.x+this.radius>w&&(this.x=w-this.radius),this.y<this.radius?this.y=this.radius:this.y+this.radius>y&&(this.y=y-this.radius)}},{key:"render",value:function(e){e.fillStyle=this.color;var t=this.x,i=this.y,n=this.radius;t=t*f.scale+f.offsetX,i=i*f.scale+f.offsetY,n*=f.scale,e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!0),e.fill()}},{key:"getCollisionBounds",value:function(){return e=this.x,t=this.y,i=this.radius,{type:2,cx:e,cy:t,radius:i};var e,t,i}}]),e}(),T=function(){function e(t,i,n,a,r){Object(h.a)(this,e),this.x=t,this.y=i,this.width=n,this.height=a,this.color=r,this.onScreen=!0}return Object(u.a)(e,[{key:"update",value:function(){this.x--,this.x+this.width<=0&&(this.onScreen=!1)}},{key:"render",value:function(e){e.fillStyle=this.color;var t=this.x,i=this.y,n=this.width,a=this.height;t=t*f.scale+f.offsetX,i=i*f.scale+f.offsetY,n*=f.scale,a*=f.scale,e.fillRect(t,i,n,a)}},{key:"getCollisionBounds",value:function(){return e=this.x,t=this.y,i=this.x+this.width,n=this.y+this.height,{type:1,x1:e,y1:t,x2:i,y2:n};var e,t,i,n}}]),e}(),b={},D={};function O(){var e=D,t=e.ctx,i=e.width,n=e.height;b.width=i,b.height=n,b.image=t.createImageData(i,n)}function A(){var e=b,t=e.size,i=e.width,n=e.height,a=e.keyState;a.ArrowDown&&b.size>1&&b.size--,a.ArrowUp&&b.size<100&&b.size++;for(var r=b.image.data,s=0;s<n;s+=t)for(var o=0;o<i;o+=t)for(var c=Math.floor(256*Math.random()),h=s;h<Math.min(s+t,n);h++)for(var u=o;u<Math.min(o+t,i);u++){var l=4*(h*i+u);r[l]=c,r[l+1]=c,r[l+2]=c,r[l+3]=255}}function M(){D.ctx.putImageData(b.image,0,0)}function z(e){b.keyState[e.code]=!0}function K(e){b.keyState[e.code]=!1}var X=[function(e){var t=m=e,i=t.width,n=t.height;return f={gameOver:!1,frameCount:0,obstacles:[],player:new R(15,75,15,"red"),score:new E(w,0,"white","Consolas",8,"SCORE: 0"),keyState:{}},v(i,n),{name:"dodge",resize:g,update:p,render:x,handleKeyDown:k,handleKeyUp:C}},function(e){var t=D=e,i=t.ctx,n=t.width,a=t.height;return b={size:1,width:n,height:a,image:i.createImageData(n,a),keyState:{}},{name:"noise",resize:O,update:A,render:M,handleKeyDown:z,handleKeyUp:K}}],Y=0,B={},F={totalFrameTime:0,frameCount:0,paused:!0},j={ctx:null,deltaTime:0,width:0,height:0};var P=function(){var e=a.a.useRef(null),t=a.a.useRef(null),i=a.a.useRef(0),n=a.a.useState(),r=Object(o.a)(n,2),s=r[0],h=r[1],u=function(){h(),F.messageTimer=void 0},l=function(){clearTimeout(F.messageTimer),u()};j.showMessage=function(e){h(e),F.messageTimer=setTimeout(u,1e4)};var d=function(e){"PageDown"===e.code?(e.preventDefault(),Y=(Y+1)%X.length,B=X[Y](j),F.totalFrameTime=0,F.frameCount=0):"PageUp"===e.code?(e.preventDefault(),Y=(Y+X.length-1)%X.length,B=X[Y](j),F.totalFrameTime=0,F.frameCount=0):"Escape"===e.code?(e.preventDefault(),F.paused=!F.paused):B.handleKeyDown&&B.handleKeyDown(e)},f=function(e){B.handleKeyUp&&B.handleKeyUp(e)};return a.a.useEffect((function(){var n=e.current,a=n.getBoundingClientRect();j.ctx=n.getContext("2d"),j.width=a.width*window.devicePixelRatio,j.height=a.height*window.devicePixelRatio,B=X[Y](j);return window.addEventListener("keydown",d),window.addEventListener("keyup",f),t.current=requestAnimationFrame((function e(a){if(void 0!==i.current){j.deltaTime=a-i.current;var r=n.getBoundingClientRect();n.width=r.width*window.devicePixelRatio,n.height=r.height*window.devicePixelRatio,n.width===j.width&&n.height===j.height||(F.totalFrameTime=0,F.frameCount=0,j.width=n.width,j.height=n.height,B.resize&&B.resize());var s=performance.now();B.update&&!F.paused&&B.update(),B.render&&B.render();var o=performance.now();F.totalFrameTime+=o-s,F.frameCount++,function(){var e=F.totalFrameTime,t=F.frameCount,i=j.ctx,n=j.width,a=B.name+" ("+(e/t).toFixed(2)+" ms)";i.fillStyle="white",i.font="20px monospace",i.textAlign="center",i.textBaseline="top",i.shadowOffsetX=1,i.shadowOffsetY=1,i.shadowColor="rgba(0.2,0.2,0.2,1.0)",i.shadowBlur=4,i.fillText(a,n/2,0)}()}i.current=a,t.current=requestAnimationFrame(e)})),function(){window.removeEventListener("keydown",d),window.removeEventListener("keyup",f),cancelAnimationFrame(t.current)}}),[e]),a.a.createElement("div",{className:"screen"},a.a.createElement("canvas",{id:"canvas",ref:e}),a.a.createElement(c,{message:s,onClick:function(e){e.preventDefault(),F.messageTimer&&l()}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,i){e.exports=i(12)}},[[6,1,2]]]);
//# sourceMappingURL=main.a4a86f43.chunk.js.map