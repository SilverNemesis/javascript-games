(this["webpackJsonpjavascript-games"]=this["webpackJsonpjavascript-games"]||[]).push([[0],{10:function(e,t,i){},11:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(4),o=i.n(r),s=(i(10),i(1)),h=i(2);function c(e,t){switch(e.type){case 1:switch(t.type){case 1:return function(e,t){if(e.x2<=t.x1||e.x1>=t.x2||e.y2<=t.y1||e.y1>=t.y2)return!1;return!0}(e,t);case 2:return u(t,e);default:throw new Error("cannot collide "+e.type+" "+t.type)}case 2:switch(t.type){case 1:return u(e,t);case 2:return function(e,t){var i=e.cx-t.cx,n=e.cy-t.cy,a=i*i+n*n,r=e.radius+t.radius;if(a<r*r)return!0;return!1}(e,t);default:throw new Error("cannot collide "+e.type+" "+t.type)}default:throw new Error("cannot collide "+e.type+" "+t.type)}}function u(e,t){var i=0,n=e.cx,a=e.cy;e.cx<t.x1?(i|=1,n=t.x1):e.cx>t.x2&&(i|=1,n=t.x2),e.cy<t.y1?(i|=2,a=t.y1):e.cy>t.y2&&(i|=2,a=t.y2);var r=e.cx-n,o=e.cy-a;return r*r+o*o<=e.radius*e.radius?i:0}var l={},d={},f=320,w=180;function y(e,t){l.width=e,l.height=t,l.scale=Math.min(e/f,t/w),l.offsetX=(e-f*l.scale)/2,l.offsetY=(t-w*l.scale)/2}function m(){var e=d;y(e.width,e.height)}function v(){var e=l,t=e.player,i=e.obstacles,n=e.score,a=e.keyState;if(!l.gameOver){if(l.frameCount++,l.frameCount%150===1){var r=k(20,100),o=k(50,100),s=Math.floor(l.width/l.scale);i.push(new E(s,0,10,r,"green")),i.push(new E(s,r+o,10,w-r-o,"green"))}t.update(a);for(var h=0;h<i.length;h++)i[h].update();l.obstacles=i.filter((function(e){return e.onScreen})),n.text="SCORE: "+l.frameCount;for(var u=t.getCollisionBounds(),d=0;d<i.length;d+=1)c(u,i[d].getCollisionBounds())&&(l.gameOver=!0)}}function p(){var e=d.ctx,t=l,i=t.width,n=t.height,a=t.player,r=t.obstacles,o=t.score;e.clearRect(0,0,i,n),e.fillStyle="#111",e.fillRect(l.offsetX,l.offsetY,f*l.scale,w*l.scale),e.save(),e.rect(l.offsetX,l.offsetY,f*l.scale,w*l.scale),e.clip(),a.render(e);for(var s=0;s<r.length;s+=1)r[s].render(e);o.render(e),e.restore()}function g(e){l.keyState[e.code]=!0}function x(e){l.keyState[e.code]=!1}function k(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var S=function(){function e(t,i,n,a,r,o){Object(s.a)(this,e),this.x=t,this.y=i,this.color=n,this.fontName=a,this.fontSize=r,this.text=o}return Object(h.a)(e,[{key:"render",value:function(e){e.font=(this.fontSize*l.scale).toFixed(0)+"px "+this.fontName,e.fillStyle=this.color,e.textAlign="right",e.textBaseline="top";var t=this.x,i=this.y;t=t*l.scale+l.offsetX,i=i*l.scale+l.offsetY,e.fillText(this.text,t,i)}}]),e}(),C=function(){function e(t,i,n,a){Object(s.a)(this,e),this.x=t,this.y=i,this.radius=n,this.color=a,this.speedX=0,this.speedY=0}return Object(h.a)(e,[{key:"update",value:function(e){this.speedX=0,this.speedY=0,(e.KeyW||e.ArrowUp)&&(this.speedY-=1),(e.KeyS||e.ArrowDown)&&(this.speedY+=1),(e.KeyA||e.ArrowLeft)&&(this.speedX-=1),(e.KeyD||e.ArrowRight)&&(this.speedX+=1),this.x+=this.speedX,this.y+=this.speedY,this.x<this.radius?this.x=this.radius:this.x+this.radius>f&&(this.x=f-this.radius),this.y<this.radius?this.y=this.radius:this.y+this.radius>w&&(this.y=w-this.radius)}},{key:"render",value:function(e){e.fillStyle=this.color;var t=this.x,i=this.y,n=this.radius;t=t*l.scale+l.offsetX,i=i*l.scale+l.offsetY,n*=l.scale,e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!0),e.fill()}},{key:"getCollisionBounds",value:function(){return e=this.x,t=this.y,i=this.radius,{type:2,cx:e,cy:t,radius:i};var e,t,i}}]),e}(),E=function(){function e(t,i,n,a,r){Object(s.a)(this,e),this.x=t,this.y=i,this.width=n,this.height=a,this.color=r,this.onScreen=!0}return Object(h.a)(e,[{key:"update",value:function(){this.x--,this.x+this.width<=0&&(this.onScreen=!1)}},{key:"render",value:function(e){e.fillStyle=this.color;var t=this.x,i=this.y,n=this.width,a=this.height;t=t*l.scale+l.offsetX,i=i*l.scale+l.offsetY,n*=l.scale,a*=l.scale,e.fillRect(t,i,n,a)}},{key:"getCollisionBounds",value:function(){return e=this.x,t=this.y,i=this.x+this.width,n=this.y+this.height,{type:1,x1:e,y1:t,x2:i,y2:n};var e,t,i,n}}]),e}(),R={},b={};function D(){var e=b,t=e.ctx,i=e.width,n=e.height;R.width=i,R.height=n,R.image=t.createImageData(i,n)}function O(){var e=R,t=e.size,i=e.width,n=e.height,a=e.keyState;a.ArrowDown&&R.size>1&&R.size--,a.ArrowUp&&R.size<100&&R.size++;for(var r=R.image.data,o=0;o<n;o+=t)for(var s=0;s<i;s+=t)for(var h=Math.floor(256*Math.random()),c=o;c<Math.min(o+t,n);c++)for(var u=s;u<Math.min(s+t,i);u++){var l=4*(c*i+u);r[l]=h,r[l+1]=h,r[l+2]=h,r[l+3]=255}}function z(){b.ctx.putImageData(R.image,0,0)}function A(e){R.keyState[e.code]=!0}function K(e){R.keyState[e.code]=!1}var X=[function(e){var t=d=e,i=t.width,n=t.height;return l={gameOver:!1,frameCount:0,obstacles:[],player:new C(15,75,15,"red"),score:new S(f,0,"white","Consolas",15,"SCORE: 0"),keyState:{}},y(i,n),{name:"dodge",resize:m,update:v,render:p,handleKeyDown:g,handleKeyUp:x}},function(e){var t=b=e,i=t.ctx,n=t.width,a=t.height;return R={size:1,width:n,height:a,image:i.createImageData(n,a),keyState:{}},{name:"noise",resize:D,update:O,render:z,handleKeyDown:A,handleKeyUp:K}}],Y=0,B={},F={totalFrameTime:0,frameCount:0,paused:!0},M={ctx:null,deltaTime:0,width:0,height:0};function T(e){"PageDown"===e.code?(e.preventDefault(),Y=(Y+1)%X.length,B=X[Y](M),F.totalFrameTime=0,F.frameCount=0):"PageUp"===e.code?(e.preventDefault(),Y=(Y+X.length-1)%X.length,B=X[Y](M),F.totalFrameTime=0,F.frameCount=0):"Escape"===e.code?(e.preventDefault(),F.paused=!F.paused):B.handleKeyDown&&B.handleKeyDown(e)}function j(e){B.handleKeyUp&&B.handleKeyUp(e)}var P=function(){var e=a.a.useRef(null),t=a.a.useRef(null),i=a.a.useRef(0);return a.a.useEffect((function(){var n=e.current,a=n.getBoundingClientRect();M.ctx=n.getContext("2d"),M.width=a.width*window.devicePixelRatio,M.height=a.height*window.devicePixelRatio,B=X[Y](M);return window.addEventListener("keydown",T),window.addEventListener("keyup",j),t.current=requestAnimationFrame((function e(a){if(void 0!==i.current){M.deltaTime=a-i.current;var r=n.getBoundingClientRect();n.width=r.width*window.devicePixelRatio,n.height=r.height*window.devicePixelRatio,n.width===M.width&&n.height===M.height||(F.totalFrameTime=0,F.frameCount=0,M.width=n.width,M.height=n.height,B.resize&&B.resize());var o=performance.now();B.update&&!F.paused&&B.update(),B.render&&B.render();var s=performance.now();F.totalFrameTime+=s-o,F.frameCount++,function(){var e=F.totalFrameTime,t=F.frameCount,i=M.ctx,n=M.width,a=B.name+" ("+(e/t).toFixed(2)+" ms)";i.fillStyle="white",i.font="20px monospace",i.textAlign="center",i.textBaseline="top",i.shadowOffsetX=1,i.shadowOffsetY=1,i.shadowColor="rgba(0.2,0.2,0.2,1.0)",i.shadowBlur=4,i.fillText(a,n/2,0)}()}i.current=a,t.current=requestAnimationFrame(e)})),function(){window.removeEventListener("keydown",T),window.removeEventListener("keyup",j),cancelAnimationFrame(t.current)}}),[e]),a.a.createElement("div",{className:"screen"},a.a.createElement("canvas",{id:"canvas",ref:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,i){e.exports=i(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.79caaf46.chunk.js.map