(this["webpackJsonpjavascript-games"]=this["webpackJsonpjavascript-games"]||[]).push([[0],{10:function(e,t,i){},11:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(4),s=i.n(r),o=(i(10),i(1)),h=i(2);function c(e,t){switch(e.type){case 1:switch(t.type){case 1:return function(e,t){if(e.x2<=t.x1||e.x1>=t.x2||e.y2<=t.y1||e.y1>=t.y2)return!1;return!0}(e,t);case 2:return l(t,e);default:throw new Error("cannot collide "+e.type+" "+t.type)}case 2:switch(t.type){case 1:return l(e,t);case 2:return function(e,t){var i=e.cx-t.cx,n=e.cy-t.cy,a=i*i+n*n,r=e.radius+t.radius;if(a<r*r)return!0;return!1}(e,t);default:throw new Error("cannot collide "+e.type+" "+t.type)}default:throw new Error("cannot collide "+e.type+" "+t.type)}}function l(e,t){var i=0,n=e.cx,a=e.cy;e.cx<t.x1?(i|=1,n=t.x1):e.cx>t.x2&&(i|=1,n=t.x2),e.cy<t.y1?(i|=2,a=t.y1):e.cy>t.y2&&(i|=2,a=t.y2);var r=e.cx-n,s=e.cy-a;return r*r+s*s<=e.radius*e.radius?i:0}var u={},d=320,f=180;function w(e,t){u.width=e,u.height=t,u.scale=Math.min(e/d,t/f),u.offsetX=(e-d*u.scale)/2,u.offsetY=(t-f*u.scale)/2}function y(e){w(e.width,e.height)}function m(){var e=u,t=e.player,i=e.obstacles,n=e.score,a=e.keyState;if(!u.paused){if(u.frameCount++,u.frameCount%150===1){var r=g(20,100),s=g(50,100),o=Math.floor(u.width/u.scale);i.push(new S(o,0,10,r,"green")),i.push(new S(o,r+s,10,f-r-s,"green"))}t.update(a);for(var h=0;h<i.length;h++)i[h].update();u.obstacles=i.filter((function(e){return e.onScreen})),n.text="SCORE: "+u.frameCount;for(var l=t.getCollisionBounds(),d=0;d<i.length;d+=1)c(l,i[d].getCollisionBounds())&&(u.paused=!0)}}function v(e){var t=e.ctx,i=u,n=i.width,a=i.height,r=i.player,s=i.obstacles,o=i.score;t.clearRect(0,0,n,a),t.fillStyle="#111",t.fillRect(u.offsetX,u.offsetY,d*u.scale,f*u.scale),t.save(),t.rect(u.offsetX,u.offsetY,d*u.scale,f*u.scale),t.clip(),r.render(t);for(var h=0;h<s.length;h+=1)s[h].render(t);o.render(t),t.restore()}function p(e){u.keyState[e.code]=!0}function x(e){u.keyState[e.code]=!1}function g(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var k=function(){function e(t,i,n,a,r,s){Object(o.a)(this,e),this.x=t,this.y=i,this.color=n,this.fontName=a,this.fontSize=r,this.text=s}return Object(h.a)(e,[{key:"render",value:function(e){e.font=(this.fontSize*u.scale).toFixed(0)+"px "+this.fontName,e.fillStyle=this.color,e.textAlign="right",e.textBaseline="top";var t=this.x,i=this.y;t=t*u.scale+u.offsetX,i=i*u.scale+u.offsetY,e.fillText(this.text,t,i)}}]),e}(),C=function(){function e(t,i,n,a){Object(o.a)(this,e),this.x=t,this.y=i,this.radius=n,this.color=a,this.speedX=0,this.speedY=0}return Object(h.a)(e,[{key:"update",value:function(e){this.speedX=0,this.speedY=0,(e.KeyW||e.ArrowUp)&&(this.speedY-=1),(e.KeyS||e.ArrowDown)&&(this.speedY+=1),(e.KeyA||e.ArrowLeft)&&(this.speedX-=1),(e.KeyD||e.ArrowRight)&&(this.speedX+=1),this.x+=this.speedX,this.y+=this.speedY,this.x<this.radius?this.x=this.radius:this.x+this.radius>d&&(this.x=d-this.radius),this.y<this.radius?this.y=this.radius:this.y+this.radius>f&&(this.y=f-this.radius)}},{key:"render",value:function(e){e.fillStyle=this.color;var t=this.x,i=this.y,n=this.radius;t=t*u.scale+u.offsetX,i=i*u.scale+u.offsetY,n*=u.scale,e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!0),e.fill()}},{key:"getCollisionBounds",value:function(){return e=this.x,t=this.y,i=this.radius,{type:2,cx:e,cy:t,radius:i};var e,t,i}}]),e}(),S=function(){function e(t,i,n,a,r){Object(o.a)(this,e),this.x=t,this.y=i,this.width=n,this.height=a,this.color=r,this.onScreen=!0}return Object(h.a)(e,[{key:"update",value:function(){this.x--,this.x+this.width<=0&&(this.onScreen=!1)}},{key:"render",value:function(e){e.fillStyle=this.color;var t=this.x,i=this.y,n=this.width,a=this.height;t=t*u.scale+u.offsetX,i=i*u.scale+u.offsetY,n*=u.scale,a*=u.scale,e.fillRect(t,i,n,a)}},{key:"getCollisionBounds",value:function(){return e=this.x,t=this.y,i=this.x+this.width,n=this.y+this.height,{type:1,x1:e,y1:t,x2:i,y2:n};var e,t,i,n}}]),e}(),E={};function b(e){var t=e.ctx,i=e.width,n=e.height;E.width=i,E.height=n,E.image=t.createImageData(i,n)}function R(e){for(var t=e.ctx,i=E,n=i.size,a=i.width,r=i.height,s=E.image.data,o=0;o<r;o+=n)for(var h=0;h<a;h+=n)for(var c=Math.floor(256*Math.random()),l=o;l<Math.min(o+n,r);l++)for(var u=h;u<Math.min(h+n,a);u++){var d=4*(l*a+u);s[d]=c,s[d+1]=c,s[d+2]=c,s[d+3]=255}t.putImageData(E.image,0,0)}function z(e){40===e.keyCode?E.size>1&&E.size--:38===e.keyCode&&E.size<100&&E.size++}var X=[function(e){var t=e.width,i=e.height;return u={paused:!1,frameCount:0,obstacles:[],player:new C(15,75,15,"red"),score:new k(d,0,"white","Consolas",15),keyState:{}},w(t,i),{name:"dodge",resize:y,update:m,render:v,handleKeyDown:p,handleKeyUp:x}},function(e){var t=e.ctx,i=e.width,n=e.height;return E={size:1,width:i,height:n,image:t.createImageData(i,n)},{name:"noise",resize:b,render:R,handleKeyDown:z}}],Y=0,B={},K={totalFrameTime:0,frameCount:0,ctx:null,deltaTime:0,width:0,height:0,image:null};function A(e){B.handleClick&&B.handleClick(e)}function D(e){9===e.keyCode?(e.preventDefault(),Y=(Y+1)%X.length,B=X[Y](K),K.totalFrameTime=0,K.frameCount=0):B.handleKeyDown&&B.handleKeyDown(e)}function F(e){B.handleKeyUp&&B.handleKeyUp(e)}var M=function(){var e=a.a.useRef(null),t=a.a.useRef(null),i=a.a.useRef(0);return a.a.useEffect((function(){var n=e.current,a=n.getBoundingClientRect();K.ctx=n.getContext("2d"),K.width=a.width*window.devicePixelRatio,K.height=a.height*window.devicePixelRatio,B=X[Y](K);return window.addEventListener("click",A),window.addEventListener("keydown",D),window.addEventListener("keyup",F),t.current=requestAnimationFrame((function e(a){if(void 0!==i.current){K.deltaTime=a-i.current;var r=n.getBoundingClientRect();n.width=r.width*window.devicePixelRatio,n.height=r.height*window.devicePixelRatio,n.width===K.width&&n.height===K.height||(K.totalFrameTime=0,K.frameCount=0,K.width=n.width,K.height=n.height,B.resize&&B.resize(K));var s=performance.now();B.update&&B.update(K),B.render&&B.render(K);var o=performance.now();K.totalFrameTime+=o-s,K.frameCount++,function(e){var t=e.ctx,i=e.width,n=e.totalFrameTime,a=e.frameCount,r=B.name+" ("+(n/a).toFixed(2)+" ms)";t.fillStyle="white",t.font="20px monospace",t.textAlign="center",t.textBaseline="top",t.shadowOffsetX=1,t.shadowOffsetY=1,t.shadowColor="rgba(0.2,0.2,0.2,1.0)",t.shadowBlur=4,t.fillText(r,i/2,0)}(K)}i.current=a,t.current=requestAnimationFrame(e)})),function(){window.removeEventListener("click",A),window.removeEventListener("keydown",D),window.removeEventListener("keyup",F),cancelAnimationFrame(t.current)}}),[e]),a.a.createElement("div",{className:"screen"},a.a.createElement("canvas",{className:"canvas",ref:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,i){e.exports=i(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.a8525b84.chunk.js.map