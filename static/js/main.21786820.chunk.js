(this["webpackJsonpjavascript-games"]=this["webpackJsonpjavascript-games"]||[]).push([[0],{10:function(e,t,i){},11:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),r=i(4),o=i.n(r),h=(i(10),i(1)),s=i(2);var c={};function l(e){var t=e.width,i=e.height;c.width=t,c.height=i,c.scaleX=Math.floor(t/320),c.scaleY=Math.floor(i/180)}function d(){var e,t,i=c,n=i.player,a=i.obstacles,r=i.score,o=i.keyState;if(!c.paused){if(c.frameCount++,c.frameCount%150===1){var h=m(20,100),s=m(50,100),l=Math.floor(c.width/c.scaleX);a.push(new y(l,0,10,h,"green")),a.push(new y(l,h+s,10,l-h-s,"green"))}n.update(o);for(var d=0;d<a.length;d++)a[d].update();r.text="SCORE: "+c.frameCount;for(var u=n.getRectangle(),f=0;f<a.length;f+=1)e=u,t=a[f].getRectangle(),e.x2<=t.x1||e.x1>=t.x2||e.y2<=t.y1||e.y1>=t.y2||(c.paused=!0)}}function u(e){var t=e.ctx,i=c,n=i.width,a=i.height,r=i.player,o=i.obstacles,h=i.score;t.clearRect(0,0,n,a),r.render(t);for(var s=0;s<o.length;s+=1)o[s].render(t);h.render(t)}function f(e){c.keyState[e.code]=!0}function w(e){c.keyState[e.code]=!1}function m(e,t){return Math.floor(Math.random()*(t-e+1)+e)}var g=function(){function e(t,i,n,a,r,o){Object(h.a)(this,e),this.x=t,this.y=i,this.color=n,this.fontName=a,this.fontSize=r,this.text=o}return Object(s.a)(e,[{key:"render",value:function(e){e.font=(this.fontSize*Math.min(c.scaleX,c.scaleY)).toFixed(0)+"px "+this.fontName,e.fillStyle=this.color,e.fillText(this.text,this.x*c.scaleX,this.y*c.scaleY)}}]),e}(),v=function(){function e(t,i,n,a,r){Object(h.a)(this,e),this.width=n,this.height=a,this.x=t,this.y=i,this.color=r,this.speedX=0,this.speedY=0}return Object(s.a)(e,[{key:"update",value:function(e){this.speedX=0,this.speedY=0,(e.KeyW||e.ArrowUp)&&(this.speedY-=1),(e.KeyS||e.ArrowDown)&&(this.speedY+=1),(e.KeyA||e.ArrowLeft)&&(this.speedX-=1),(e.KeyD||e.ArrowRight)&&(this.speedX+=1),this.x+=this.speedX,this.y+=this.speedY}},{key:"render",value:function(e){e.fillStyle=this.color,e.fillRect(this.x*c.scaleX,this.y*c.scaleY,this.width*c.scaleX,this.height*c.scaleY)}},{key:"getRectangle",value:function(){return{x1:this.x,y1:this.y,x2:this.x+this.width,y2:this.y+this.height}}}]),e}(),y=function(){function e(t,i,n,a,r){Object(h.a)(this,e),this.x=t,this.y=i,this.width=n,this.height=a,this.color=r}return Object(s.a)(e,[{key:"update",value:function(){return this.x--,!(this.x+this.width<=0)}},{key:"render",value:function(e){e.fillStyle=this.color,e.fillRect(this.x*c.scaleX,this.y*c.scaleY,this.width*c.scaleX,this.height*c.scaleY)}},{key:"getRectangle",value:function(){return{x1:this.x,y1:this.y,x2:this.x+this.width,y2:this.y+this.height}}}]),e}(),p={};function x(e){var t=e.ctx,i=e.width,n=e.height;p.width=i,p.height=n,p.image=t.createImageData(i,n)}function k(e){for(var t=e.ctx,i=p,n=i.size,a=i.width,r=i.height,o=p.image.data,h=0;h<r;h+=n)for(var s=0;s<a;s+=n)for(var c=Math.floor(256*Math.random()),l=h;l<Math.min(h+n,r);l++)for(var d=s;d<Math.min(s+n,a);d++){var u=4*(l*a+d);o[u]=c,o[u+1]=c,o[u+2]=c,o[u+3]=255}t.putImageData(p.image,0,0)}function C(e){40===e.keyCode?p.size>1&&p.size--:38===e.keyCode&&p.size<100&&p.size++}var R=[function(e){var t=e.width,i=e.height;return c={width:t,height:i,scaleX:Math.floor(t/320),scaleY:Math.floor(i/180),paused:!1,frameCount:0,obstacles:[],player:new v(10,75,30,30,"red"),score:new g(220,25,"white","Consolas",15),keyState:{}},{name:"dodge",resize:l,update:d,render:u,handleKeyDown:f,handleKeyUp:w}},function(e){var t=e.ctx,i=e.width,n=e.height;return p={size:1,width:i,height:n,image:t.createImageData(i,n)},{name:"noise",resize:x,render:k,handleKeyDown:C}}],X=0,Y={},E={totalFrameTime:0,frameCount:0,ctx:null,deltaTime:0,width:0,height:0,image:null};function M(e){Y.handleClick&&Y.handleClick(e)}function S(e){9===e.keyCode?(e.preventDefault(),X=(X+1)%R.length,Y=R[X](E),E.totalFrameTime=0,E.frameCount=0):Y.handleKeyDown&&Y.handleKeyDown(e)}function b(e){Y.handleKeyUp&&Y.handleKeyUp(e)}var z=function(){var e=a.a.useRef(null),t=a.a.useRef(null),i=a.a.useRef(0);return a.a.useEffect((function(){var n=e.current,a=n.getBoundingClientRect();E.ctx=n.getContext("2d"),E.width=a.width*window.devicePixelRatio,E.height=a.height*window.devicePixelRatio,Y=R[X](E);return window.addEventListener("click",M),window.addEventListener("keydown",S),window.addEventListener("keyup",b),t.current=requestAnimationFrame((function e(a){if(void 0!==i.current){E.deltaTime=a-i.current;var r=n.getBoundingClientRect();n.width=r.width*window.devicePixelRatio,n.height=r.height*window.devicePixelRatio,n.width===E.width&&n.height===E.height||(E.totalFrameTime=0,E.frameCount=0,E.width=n.width,E.height=n.height,Y.resize&&Y.resize(E));var o=performance.now();Y.update&&Y.update(E),Y.render&&Y.render(E);var h=performance.now();E.totalFrameTime+=h-o,E.frameCount++,function(e){var t=e.ctx,i=e.width,n=e.totalFrameTime,a=e.frameCount,r=Y.name+" ("+(n/a).toFixed(2)+" ms)";t.fillStyle="white",t.font="20px monospace",t.textAlign="center",t.textBaseline="top",t.shadowOffsetX=1,t.shadowOffsetY=1,t.shadowColor="rgba(0.2,0.2,0.2,1.0)",t.shadowBlur=4,t.fillText(r,i/2,0)}(E)}i.current=a,t.current=requestAnimationFrame(e)})),function(){window.removeEventListener("click",M),window.removeEventListener("keydown",S),window.removeEventListener("keyup",b),cancelAnimationFrame(t.current)}}),[e]),a.a.createElement("div",{className:"screen"},a.a.createElement("canvas",{className:"canvas",ref:e}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,i){e.exports=i(11)}},[[5,1,2]]]);
//# sourceMappingURL=main.21786820.chunk.js.map